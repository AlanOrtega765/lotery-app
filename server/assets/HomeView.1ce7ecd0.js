import{_ as S}from"./Ticket.8aea17aa.js";import{r as o,c as l,a,b as g,t as r,d as c,F as b,e as L,f as N,_ as V,i as D,u as $,o as s,n as F,g as I}from"./index.9ec50a16.js";const z={class:"relative px-[50px]"},H={key:0},M={class:"flex justify-between items-center mt-[34px]"},P={class:"flex items-center"},R=a("h1",{class:"text-2xl font-bold"},"Escoge un ticket",-1),q={key:0,class:"text-2xl font-bold"},A={class:"relative flex justify-evenly items-center h-[260px] shadow-inner rounded-md bg-just-white mt-11"},G={class:"relative flex flex-col items-center"},J={class:"text-sm font-medium mt-1"},K={key:0,class:"absolute flex justify-center items-center text-xl text-just-white font-bold w-full h-full bg-just-black/70 rounded-md"},O={class:"flex justify-between items-center mt-2"},Q={key:0,class:"text-xl font-semibold"},U={class:"mt-8"},W={key:0,class:"block text-xl font-medium text-center"},X={key:1,class:"block text-xl font-medium text-center"},Y={key:2,class:"block text-xl font-medium text-center"},Z={key:1,class:"absolute top-0 left-0 flex justify-center items-center w-[800px] h-[600px] bg-just-black/60 rounded-3xl"},ee={class:"flex justify-center items-center w-[538px] h-[346px] bg-just-white rounded-3xl"},te={class:"text-2xl"},ce={__name:"HomeView",setup(se){const e=D("socket"),w=$(),v=o(0),i=o(""),u=o(30),_=o(null),p=o(null),x=o([]),d=o(null),n=o({}),h=o(""),f=o(null),y=o(!1),k=()=>{clearInterval(_.value),_.value=null},j=()=>{u.value=30},T=()=>{e.emit("turn confirmed"),e.emit("set player status to ready"),e.emit("assing ticket",d.value),e.emit("start turn")},C=t=>{d.value=t};return e.emit("remaining players"),e.on("send remaining players",t=>{v.value=t}),e.on("on player disconnect",t=>{e.emit("remaining players"),i.value=t,setTimeout(()=>{i.value=""},4e3)}),e.emit("starting game"),e.emit("start turn"),e.on("start timer",()=>{_.value=setInterval(()=>{u.value--,u.value===0&&k()},1e3)}),e.on("reset timer",()=>{k(),j()}),e.on("game started",()=>y.value=!0),e.on("tickets created",t=>x.value=t),e.on("set player status in turn",t=>{n.value=t}),e.on("set player status waiting their turn",t=>{n.value=t}),e.on("player is ready",t=>n.value=t),e.on("send player name in turn",t=>h.value=t),e.on("ticket selected",t=>{p.value[t].refTicket.classList.add("opacity-30"),f.value[t].classList.remove("hidden"),f.value[t].classList.add("visible")}),e.on("calculated results",()=>w.push({path:"/results",replace:!0})),(t,ae)=>{const E=I("font-awesome-icon");return s(),l(b,null,[a("main",z,[y.value?(s(),l("div",H,[a("div",M,[a("div",P,[R,g(E,{class:"ml-4 w-[36px] h-[32px]",icon:"ticket"})]),n.value.choosing?(s(),l("span",q,r(u.value),1)):c("",!0)]),a("div",A,[(s(!0),l(b,null,L(x.value,(B,m)=>(s(),l("div",{key:m},[a("div",G,[g(S,{ref_for:!0,ref_key:"ticketElements",ref:p,class:F(d.value===m?"opacity-30":""),ticket:B,onClick:ne=>C(m)},null,8,["class","ticket","onClick"]),a("span",J,"Ticket "+r(m+1),1),a("div",{ref_for:!0,ref_key:"transparentBg",ref:f,class:"absolute top-0 left-0 bg-transparent w-full h-full hidden"},null,512)])]))),128)),n.value.choosing?c("",!0):(s(),l("div",K,[a("span",null,"\xA1"+r(h.value)+" est\xE1 seleccionando!",1)]))]),a("div",O,[n.value.ready?c("",!0):(s(),l("span",Q,r(n.value.choosing?"Tu turno":"Esperando tu turno..."),1))]),a("div",U,[n.value.choosing?(s(),l("span",W,"Selecciona un ticket")):c("",!0),n.value.ready?(s(),l("span",X,"Ticket seleccionado: "+r(d.value+1),1)):c("",!0),n.value.ready?(s(),l("span",Y,"Esperando a los demas jugadores...")):c("",!0),!n.value.waiting&&!n.value.ready?(s(),l("button",{key:3,class:"block mx-auto mt-[26px] w-[100px] h-[38px] rounded-md text-just-white text-lg font-semibold bg-very-soft-red hover:bg-soft-red",onClick:T}," Confirmar ")):c("",!0)])])):c("",!0),v.value!==0?(s(),l("div",Z,[a("div",ee,[a("span",te,"Esperando "+r(v.value)+" jugadores...",1)])])):c("",!0)]),i.value?(s(),N(V,{key:0,color:"soft-black","icon-name":"user-slash",message:i.value},null,8,["message"])):c("",!0)],64)}}};export{ce as default};
